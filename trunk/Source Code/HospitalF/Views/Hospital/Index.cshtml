@model HospitalF.Models.HospitalModel
@using HospitalF.Constant
@using System.Collections.Generic;
@using HospitalF.Models;
@{
    ViewBag.Title = "Index";
}
<style>
    h5
    {
        margin-left: 20px;
    }
    div.dt-bottom-row
    {
        background: #fafafa;
        font-size: 11px;
        overflow: hidden;
        padding: 5px 10px;
        border-top: 1px solid #ccc;
        -webkit-box-shadow: inset 0 1px #fff;
        -ms-box-shadow: inset 0 1px #fff;
        box-shadow: inset 0 1px #fff;
    }

    span.date
    {
        width: 26px;
        height: 26px;
        text-align: center;
        line-height: 26px;
        background: #ECE9E9;
        font-size: 16px;
        color: #296191;
        display: block;
        margin: 0 3px 3px 0;
        float: left;
    }

        span.date:nth-child(3n)
        {
            margin-right: 0;
        }

    legend
    {
        height: 50px;
        font-size: 18px;
    }

    .btn-primary
    {
        float: right;
    }
</style>
<script type="text/javascript">
    $(function () {

        //search doctor

        $(document).ready(function () {
            @*AJAX for cascading Doctor drop down list*@
            $("#Search").click(function () {
                var doctorname = $('#DoctorName').val();
                var specialityid = $('#SpecialityID').val();
                var hospitalid = $('#HospitalID').val();
                if ((doctorname == '' && specialityid != 0) || (doctorname != '' && specialityid == 0) || (doctorname != '' && specialityid != 0)) {
                    var statesProgress = $("#states-loading-doctor-progress");
                    statesProgress.show();
                    $.ajax({
                        cache: false,
                        type: "GET",
                        url: "@(Url.RouteUrl(Constants.SearchDoctorAction))",
                        data: { doctorName: doctorname, specialityID: specialityid, hospitalID: hospitalid },
                        success: function (data) {
                            $('#SearchResult').replaceWith(data);
                            statesProgress.hide();
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            $('#wid-id-1').replaceWith(data);
                            statesProgress.hide();
                        }
                    });
                } else {
                    window.alert('Vui lòng nhập tên bác sĩ hoặc chọn chuyên khoa');
                }
            });
        });
    });
</script>
<section id="widget-grid" class="">

    <!-- row -->
    <div class="row">

        <!-- NEW WIDGET START -->
        <article class="col-sm-12 col-md-12 col-lg-12">

            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget" id="wid-id-0" data-widget-colorbutton="false" data-widget-editbutton="false">
                <header style="border: none; height: 40px;">
                    <span class="widget-icon" style="font-size: 180%;"><i class="fa fa-eye"></i></span>
                    <h1 style="line-height: 40px; padding-left: 30px;">Thông tin bệnh viện</h1>
                </header>

                <!-- widget div-->
                <div style="border: none;">

                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                        <!-- This area used as dropdown edit box -->

                    </div>
                    <!-- end widget edit box -->

                    <!-- widget content -->
                    <div class="widget-body">

                        <form class="form-horizontal">
                            <input type="hidden" value="25" />
                            @Html.TextBoxFor(m => m.HospitalID, new
                       {
                           @type = "hidden"
                       })
                            <fieldset>
                                <legend>
                                    <span>Thông tin chung</span>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-edit"></i>
                                        Chỉnh sửa
                                    </button>
                                </legend>

                                <div class="form-group">
                                    <label class="col-md-2 control-label">Tên bệnh viện</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;">@Model.HospitalName</label>
                                        @*@Html.LabelFor(m => m.HospitalName, new
                                   {
                                       @class="control-label",
                                       @style="text-align: left;"
                                   })*@
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Website</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;"><a href="@Model.Website">@Model.Website</a></label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Loại hình dịch vụ</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;">@Model.TypeName</label>
                                        @*@Html.LabelFor(m => m.TypeName, new
                                   {
                                       @class="control-label",
                                       @style="text-align: left;"
                                   })*@
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Địa chỉ</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;">@Model.Address</label>
                                        @* @Html.LabelFor(m => m.Address, new
                                   {
                                       @class="control-label",
                                       @style="text-align: left;"
                                   })*@
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Số điện thoại</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;">@Model.PhoneNo</label>
                                        @* @Html.LabelFor(m => m.PhoneNo, new
                                   {
                                       @class="control-label",
                                       @style="text-align: left;"
                                   })*@
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Số Fax</label>
                                    <div class="col-md-5">
                                        <label class="control-label" style="text-align: left;">@Model.Fax</label>
                                        @* @Html.LabelFor(m => m.Fax, new
                                   {
                                       @class="control-label",
                                       @style="text-align: left;"
                                   })*@
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset>
                                <legend><span>Chuyên khoa</span>
                                    <a href="#"><button class="btn btn-primary" type="button">
                                        <i class="fa fa-edit"></i>
                                        Chỉnh sửa
                                    </button></a>
                                    
                                </legend>
                                @{List<Speciality> SpecialityList = Model.SpecialityList;
                                  for (int i = 0; i < SpecialityList.Count; i++)
                                  {
                                      if (i == SpecialityList.Count - 1)
                                      {
                                          break;
                                      }
                                      int tempI = i;
                                    <div class="form-group">
                                        @for (int j = tempI; j < tempI + 3 && j < SpecialityList.Count; j++)
                                        {
                                            <label class="col-md-2 control-label" style="text-align: left; margin-left: 2%;">@SpecialityList[j].Speciality_Name</label>
                                            if ((j + 1) == (tempI + 3))
                                            {
                                                i = j;
                                            }
                                        }
                                    </div>
                                  }
                                }
                            </fieldset>

                            <fieldset>
                                <legend>Các bác sĩ</legend>
                                <div class="well" style="width: 50%;">
                                    <div class="input-group">
                                        @*<input class="form-control" type="text" placeholder="Tên bác sĩ" style="width: 40%;">*@
                                        @Html.TextBoxFor(m => m.DoctorName, new
                                   {
                                       @type = "text",
                                       @class = "form-control",
                                       @placeholder = Constants.DoctorNameViet,
                                       @style = "width:40%;"
                                   })
                                        @*<select class="form-control" id="select-1" style="width: 60%;">
                                            <option>Chuyên khoa</option>
                                        </select>*@
                                        @Html.DropDownListFor(m => m.SpecialityID, (SelectList)ViewBag.SpecialityList,
                                                Constants.RequireSpeciality, new
                                                {
                                                    //@id = "select-1",
                                                    @class = "form-control",
                                                    @style = "width: 60%;"
                                                })
                                        <div class="input-group-btn">
                                            <button class="btn btn-default btn-primary" type="button" id="Search">
                                                <i class="fa fa-search"></i>Tìm kiếm
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="SearchResult">
                                    <br />
                                    <!--Search result display here-->

                                </div>
                                <!-- end widget -->

                            </fieldset>

                            <fieldset class="demo-switcher-1">
                                <legend>
                                    <span>Lịch khám bệnh</span>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-edit"></i>
                                        Chỉnh sửa
                                    </button>
                                </legend>

                                <fieldset class="demo-switcher-1">
                                    <legend><span>Cơ sơ vật chất</span>
                                        <button class="btn btn-primary" type="submit">
                                            <i class="fa fa-edit"></i>
                                            Chỉnh sửa
                                        </button>
                                    </legend>
                                    @{List<Facility> FacilityList = Model.FacilityList;
                                      if (FacilityList==null)
                                      {
                                        <h5>Bệnh viện hiện chưa có cơ sở vật chất nào</h5>
                                      }
                                      else
                                      {
                                          for (int i = 0; i < FacilityList.Count; i++)
                                          {
                                              if (i == FacilityList.Count - 1)
                                              {
                                                  break;
                                              }
                                              int tempI = i;
                                        <div class="form-group">
                                            @for (int j = tempI; j < tempI + 3 && j < FacilityList.Count; j++)
                                            {
                                                <label class="col-md-2 control-label" style="text-align: left; margin-left: 2%;">@FacilityList[j].Facility_Name</label>
                                                if ((j + 1) == (tempI + 3))
                                                {
                                                    i = j;
                                                }
                                            }
                                        </div>
                                          }
                                      }
                                    }
                                </fieldset>

                                <fieldset>
                                    <legend>
                                        <span>Dịch vụ đi kèm</span>
                                        <button class="btn btn-primary" type="submit">
                                            <i class="fa fa-edit"></i>
                                            Chỉnh sửa
                                        </button>
                                    </legend>
                                    @{List<Service> ServiceList = Model.ServiceList;
                                      if (ServiceList==null)
                                      {
                                        <h5>Bệnh viện hiện chưa có dịch vụ nào</h5>
                                      }
                                      else
                                      {
                                          for (int i = 0; i < ServiceList.Count; i++)
                                          {
                                              if (i == ServiceList.Count - 1)
                                              {
                                                  break;
                                              }
                                              int tempI = i;
                                        <div class="form-group">
                                            @for (int j = tempI; j < tempI + 3 && j < ServiceList.Count; j++)
                                            {
                                                <label class="col-md-2 control-label" style="text-align: left; margin-left: 2%;">@ServiceList[j].Service_Name</label>
                                                if ((j + 1) == (tempI + 3))
                                                {
                                                    i = j;
                                                }
                                            }
                                        </div>
                                          }
                                      }
                                    }
                                </fieldset>
                        </form>

                    </div>
                    <!-- end widget content -->

                </div>
                <!-- end widget div -->

            </div>
            <!-- end widget -->
        </article>
        <!-- WIDGET END -->

    </div>
</section>

