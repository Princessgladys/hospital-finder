@using HospitalF.Constant
@model HospitalF.Models.HomeModels


@Scripts.Render("~/bundles/smartadminjquery")

@*AJAX for cascading District and Disease drop down list*@
<script type="text/javascript">
    @*AJAX for auto completing Disease textbox*@
    $(document).ready(function () {
        $("#sentece-tag").on('input', function () {
            var statesProgress = $("#states-loading-search-progress");
            var availableTags = new Array();
            statesProgress.show();
            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl(Constants.LoadSuggestSentenceMethod))",
                success: function (data) {
                    $.each(data, function (id, option) {
                        availableTags.push(option);
                    });
                    statesProgress.hide();
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    statesProgress.hide();
                }
            });
            $("#sentece-tag").autocomplete({
                source: function (request, response) {
                    var results = $.ui.autocomplete.filter(availableTags, request.term);
                    response(results.slice(0, 5));
                }
            });
        });
    });

    @*AJAX for auto completing Disease textbox*@
    $(document).ready(function () {
        $("#SpecialityID").change(function () {
            var selectedItem = $(this).val();
            var statesProgress = $("#states-loading-disease-progress");
            var availableTags = new Array();
            statesProgress.show();
            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl(Constants.GetDeseaseBySpecialityMethod))",
                data: { "specialityId": selectedItem },
                success: function (data) {
                    $.each(data, function (id, option) {
                        availableTags.push(option.name);
                    });
                    statesProgress.hide();
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    statesProgress.hide();
                }
            });
            //$("#disease-tag").autocomplete({
            //    source: function (request, response) {
            //        var results = $.ui.autocomplete.filter(availableTags, request.term);
            //        response(results.slice(0, 5));
            //    }
            //});
            $("#disease-tag").autocomplete({
                source: availableTags
            });
        });
    });

    @*AJAX for cascading District drop down list*@
    $(document).ready(function () {
        $("#CityID").change(function () {
            var selectedItem = $(this).val();
            var ddlDistrict = $("#DistrictID");
            var statesProgress = $("#states-loading-district-progress");
            statesProgress.show();
            $.ajax({
                cache: false,
                type: "GET",
                url: "@(Url.RouteUrl(Constants.GetDistrictByCityMethod))",
                data: { "cityId": selectedItem },
                success: function (data) {
                    ddlDistrict.html('');
                    $.each(data, function (id, option) {
                        ddlDistrict.append($('<option></option>').val(option.id).html(option.name));
                    });
                    statesProgress.hide();
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    statesProgress.hide();
                }
            });
        });
    });
</script>

@using (Html.BeginForm(Constants.SearchResultMethod, Constants.HomeController, FormMethod.Get))
{
    <div id="content" class="col-md-8 col-md-offset-2">

        <div id="main-logo">
            <img src="../Content/img/hospital-icon.png" style="visibility: hidden; width: 25%; height: 25%;" />
        </div>

        <div class="well">
            <ul id="myTab1" class="nav nav-tabs bordered">
                <li class="active">
                    <a href="#s1" data-toggle="tab"><i class="fa fa-fw fa-lg fa-search"></i>&nbsp;Tìm Kiếm Cơ Bản</a>
                </li>
                <li>
                    <a href="#s2" data-toggle="tab"><i class="fa fa-fw fa-lg fa-plus-square"></i>&nbsp;Tìm Kiếm Theo Vị Trí</a>
                </li>
                <li>
                    <a href="#s3" data-toggle="tab"><i class="fa fa-fw fa-lg fa-crosshairs"></i>&nbsp;Tìm Kiếm Nâng Cao</a>
                </li>
            </ul>

            <div id="myTabContent1" class="tab-content padding-10">
                <div class="tab-pane fade in active" id="s1">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Nhập từ khóa về bệnh viện</legend>
                        </fieldset>
                        <div class="input-group">
                            @Html.TextBoxFor(m => m.SearchValue, new
                       {
                           @class = "form-control",
                           @placeholder = "Nhập thông tin tìm kiếm...",
                           @list = "list",
                           @id = "sentece-tag"
                       })
                            <div class="input-group-btn">
                                <button class="btn btn-default btn-primary" type="submit">
                                    <i class="fa fa-search"></i>&nbsp;Tìm Kiếm
                                </button>
                            </div>
                        </div>
                        @Html.ValidationMessageFor(m => m.SearchValue)
                        <p class="note"><strong>Ví dụ:</strong> chuyên khoa, tên bệnh viện, địa điểm...</p>
                    </form>
                </div>

                <div class="tab-pane fade" id="s2">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Nhập thông tin vị trí</legend>
                            <div class="row">

                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Tìm Theo</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            <select class="form-control">
                                                <option>Vị trí hiện tại</option>
                                                <option>Nhập vị trí</option>
                                            </select>
                                            <label class="glyphicon glyphicon-list" title="Tìm Theo"></label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Vị trí</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            <input class="form-control" type="text" placeholder="Vị trí cần tìm...">
                                            <label class="glyphicon glyphicon-pushpin" title="Vị Trí Cần Tìm"></label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row pull-right">
                                <div class="col-md-12">
                                    <button class="btn btn-default" type="reset">
                                        <i class="fa fa-eraser"></i>&nbsp;
                                        Nhập Lại
                                    </button>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-search"></i>&nbsp;
                                        Tìm Kiếm
                                    </button>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </div>

                <div class="tab-pane fade" id="s3">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Nhập thông tin bệnh viện</legend>
                            <div class="row">

                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Tỉnh / Thành phố</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            @Html.DropDownListFor(m => m.CityID, (SelectList)ViewBag.CityList,
                                                Constants.RequireCity, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.CityID)
                                            <label class="glyphicon glyphicon-globe" title="Tỉnh / Thành phố"></label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Quận / Huyện</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            @Html.DropDownListFor(m => m.DistrictID, (SelectList)ViewBag.DistrictList,
                                                Constants.RequireDistrict, new { @class = "form-control" })
                                            <label class="glyphicon glyphicon-road" title="Quận / Huyện"></label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row">

                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Chuyên khoa</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            @Html.DropDownListFor(m => m.SpecialityID, (SelectList)ViewBag.SpecialityList,
                                                Constants.RequireSpeciality, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.SpecialityID)
                                            <label class="glyphicon glyphicon-plus" title="Chuyên khoa"></label>
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group col-md-6">
                                    <label class="control-label col-md-4" for="prepend">Triệu chứng</label>
                                    <div class="col-md-8">
                                        <div class="icon-addon addon-sm">
                                            @Html.TextBoxFor(m => m.DiseaseName, new
                                       {
                                           @class = "form-control",
                                           @placeholder = "Triệu chứng...",
                                           @id = "disease-tag"
                                       })
                                            <label class="glyphicon glyphicon-plus-sign" title="Triệu chứng"></label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row pull-right">
                                <div class="col-md-12">
                                    <button class="btn btn-default" type="reset">
                                        <i class="fa fa-eraser"></i>&nbsp;
                                        Nhập Lại
                                    </button>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-search"></i>&nbsp;Tìm Kiếm
                                    </button>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </div>

            </div>
        </div>
    </div>
}